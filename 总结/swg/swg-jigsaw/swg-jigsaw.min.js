/**
 * Created by sunwg on 2015/11/24.
 */
swg=typeof swg!="undefined"?swg:{};(swg.initFocusPic=function(){var b=document.querySelectorAll(".swg-focusPic");for(var a=0;a<b.length;a++){(function(){var d=b[a],n=d.querySelector("ul"),o=d.querySelector(".lights"),c=n.querySelectorAll("li"),h=c.length;n.innerHTML+=c[0].outerHTML;c=n.querySelectorAll("li");for(var t=0;t<c.length;t++){c[t].style.width=d.clientWidth+"px"}var y=d.clientWidth,p=n.clientWidth;n.setAttribute("data-index","0");var i=o.getAttribute("data-srcNormal");var f=o.getAttribute("data-srcCurrent");var g="";for(var s=0;s<h;s++){if(s===0){g+='<img src="'+f+'"/>'}else{g+='<img src="'+i+'"/>'}}o.innerHTML=g;if(c.length<=1){return}h+=1;var z=0,A=y-p;var v=o.querySelectorAll("img");var r=function(){var k=n.getAttribute("data-index")*1;for(var B=0;B<v.length;B++){var j=v[B];if(B===k){j.setAttribute("src",f)}else{j.setAttribute("src",i)}}if(k===h-1){v[0].setAttribute("src",f)}};function e(j){return j.style.transform?/translateX\(([^)]*)px\)/.exec(j.style.transform)[1]*1:0}var u=1000;var x=5000;function q(j){var B=e(n)+y;var k=n.getAttribute("data-index")*1;if(j&&k===h-2){return}if(k===h-1){n.style.webkitTransition="0s";n.style.transitionDuration="0s";n.style.webkitTransform="translateX("+z+"px)";n.style.transform="translateX("+z+"px)";k=0}B=-y*(k+1);setTimeout(function(){n.style.webkitTransition=u/1000+"s";n.style.transitionDuration=u/1000+"s";n.style.webkitTransform="translateX("+B+"px)";n.style.transform="translateX("+B+"px)";n.setAttribute("data-index",(++k).toString());r()},100)}function m(j){var B=e(n)+y;var k=n.getAttribute("data-index")*1;if(j&&k===0){return}if(k===0){n.style.webkitTransition="0s";n.style.transitionDuration="0s";n.style.webkitTransform="translateX("+A+"px)";n.style.transform="translateX("+A+"px)";k=h-1}B=-y*(k-1);setTimeout(function(){n.style.webkitTransition=u/1000+"s";n.style.transitionDuration=u/1000+"s";n.style.webkitTransform="translateX("+B+"px)";n.style.transform="translateX("+B+"px)";n.setAttribute("data-index",(--k).toString());r()},100)}function l(){clearInterval(l.interval);l.interval=setInterval(q,x)}l();var w;d.addEventListener("touchstart",function(j){w=j["changedTouches"][0].clientX;j.preventDefault()});d.addEventListener("touchend",function(k){var j=k["changedTouches"][0].clientX-w;if(j<0){q(true);l()}else{if(j>0){m(true);l()}else{this.click()}}})})()}})();